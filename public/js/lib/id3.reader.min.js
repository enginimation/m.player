ID3v2={parseStream:function(a,b){function t(a,b){i(3,function(c,e){var f=m(e);i(f,function(c,e){typeof p[a]=="function"?p[a](f,c,e):typeof p[b]=="function"?p[b](f,c,e):d[b]?g[d[b]]=(g[d[b]]||"")+r(c):g[b]=r(c),console.log(g),q()})})}function s(a){i(4,function(b,c){var e=m(c);i(2,function(b,c){c=l(c[0]).concat(l(c[1])),i(e,function(b,c){typeof p[a]=="function"?p[a](e,b,c):d[a]?g[d[a]]=(g[d[a]]||"")+r(b):g[a]=r(b),q()})})})}function r(a){if(a.indexOf("http://")!=0){var b=a.charCodeAt(0);a=a.substr(1)}return a.replace(/[^A-Za-z0-9\(\)\{\}\[\]\!\@\#\$\%\^\&\* \/\"\'\;\>\<\?\,\~\`\.\n\t]/g,"")}function q(){g.revision<3?i(3,function(a){console.log(a);if(!/[A-Z0-9]{3}/.test(a))b(g);else{var c=e[a.substr(0,3)];t(a,c)}}):i(4,function(a){console.log(a);if(/[A-Z0-9]{4}/.test(a))s(a);else{b(g);return}})}function o(a){var b=a.charCodeAt(0);a=a.substr(1);var d=a.substr(0,3);a=a.substr(3);var e=a.charCodeAt(0),f=c[e.toString(16).toUpperCase()];a=a.substr(1);var g=a.indexOf(""),h=a.substr(0,g);a=a.substr(g+1);var i=a,k=i.split("").map(function(a){return String.fromCharCode(a.charCodeAt(0)&255)}).join("");return{dataURL:"data:img/"+d+";base64,"+j(k),PictureType:f,Description:h,MimeType:MimeType}}function n(a){var b=a.charCodeAt(0);a=a.substr(1);var d=a.indexOf(""),e=a.substr(0,d);a=a.substr(d+1);var f=a.charCodeAt(0),g=c[f.toString(16).toUpperCase()];a=a.substr(1);var h=a.indexOf(""),i=a.substr(0,h);a=a.substr(h+1);var k=a,l=k.split("").map(function(a){return String.fromCharCode(a.charCodeAt(0)&255)}).join("");return{dataURL:"data:"+e+";base64,"+j(l),PictureType:g,Description:i,MimeType:e}}function m(a){if(a.length==4)if(g.revision>3){var b=a[0]<<21;b+=a[1]<<14,b+=a[2]<<7,b+=a[3]}else{var b=a[0]<<24;b+=a[1]<<16,b+=a[2]<<8,b+=a[3]}else{var b=a[0]<<16;b+=a[1]<<8,b+=a[2]}return b}function l(a){var b=a.toString(2);return Array(8-b.length+1).join("0")+b}function k(a){var b=parseInt(r(a)),c=Math.floor(b/1e3),d=Math.floor(c/60),e=Math.floor(d/60),f=Math.floor(e/24);return{milliseconds:b%1e3,seconds:c%60,minutes:d%60,hours:e%24,days:f}}function j(a){var b="",c=0,d=a.length,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f,g,h,i,j,k,l;while(c<d)f=a.charCodeAt(c++),g=a.charCodeAt(c++),h=a.charCodeAt(c++),i=f>>2,j=(f&3)<<4|g>>4,k=(g&15)<<2|h>>6,l=h&63,isNaN(g)?k=l=64:isNaN(h)&&(l=64),b=b+e.charAt(i)+e.charAt(j)+e.charAt(k)+e.charAt(l);return b}function i(b,c){a(b,c,h)}var c={0:"Other",1:"32x32 pixels 'file icon' (PNG only)",2:"Other file icon",3:"Cover (front)",4:"Cover (back)",5:"Leaflet page",6:"Media (e.g. lable side of CD)",7:"Lead artist/lead performer/soloist",8:"Artist/performer",9:"Conductor",A:"Band/Orchestra",B:"Composer",C:"Lyricist/text writer",D:"Recording Location",E:"During recording",F:"During performance",10:"Movie/video screen capture",11:"A bright coloured fish",12:"Illustration",13:"Band/artist logotype",14:"Publisher/Studio logotype"},d={AENC:"Audio encryption",APIC:"Attached picture",COMM:"Comments",COMR:"Commercial frame",ENCR:"Encryption method registration",EQUA:"Equalization",ETCO:"Event timing codes",GEOB:"General encapsulated object",GRID:"Group identification registration",IPLS:"Involved people list",LINK:"Linked information",MCDI:"Music CD identifier",MLLT:"MPEG location lookup table",OWNE:"Ownership frame",PRIV:"Private frame",PCNT:"Play counter",POPM:"Popularimeter",POSS:"Position synchronisation frame",RBUF:"Recommended buffer size",RVAD:"Relative volume adjustment",RVRB:"Reverb",SYLT:"Synchronized lyric/text",SYTC:"Synchronized tempo codes",TALB:"album",TBPM:"BPM",TCOM:"Composer",TCON:"genre",TCOP:"Copyright message",TDAT:"date",TDLY:"Playlist delay",TENC:"Encoded by",TEXT:"Lyricist",TFLT:"File type",TIME:"time",TIT1:"Content group description",TIT2:"title",TIT3:"Subtitle",TKEY:"Initial key",TLAN:"Language(s)",TLEN:"length",TMED:"Media type",TOAL:"Original album",TOFN:"Original filename",TOLY:"Original lyricist",TOPE:"Original artist",TORY:"Original release year",TOWN:"File owner",TPE1:"artist",TPE2:"Band",TPE3:"Conductor",TPE4:"Interpreted, remixed, or otherwise modified by",TPOS:"Part of a set",TPUB:"Publisher",TRCK:"track",TRDA:"Recording dates",TRSN:"Internet radio station name",TRSO:"Internet radio station owner",TSIZ:"size",TSRC:"ISRC (international standard recording code)",TSSE:"Software/Hardware and settings used for encoding",TYER:"year",TXXX:"User defined text information frame",UFID:"Unique file identifier",USER:"Terms of use",USLT:"Unsychronized lyric/text transcription",WCOM:"Commercial information",WCOP:"Copyright/Legal information",WOAF:"Official audio file webpage",WOAR:"Official artist/performer webpage",WOAS:"Official audio source webpage",WORS:"Official internet radio station homepage",WPAY:"Payment",WPUB:"Publishers official webpage",WXXX:"User defined URL link frame"},e={BUF:"RBUF",COM:"COMM",CRA:"AENC",EQU:"EQUA",ETC:"ETCO",GEO:"GEOB",MCI:"MCDI",MLL:"MLLT",PIC:"APIC",POP:"POPM",REV:"RVRB",RVA:"RVAD",SLT:"SYLT",STC:"SYTC",TAL:"TALB",TBP:"TBPM",TCM:"TCOM",TCO:"TCON",TCR:"TCOP",TDA:"TDAT",TDY:"TDLY",TEN:"TENC",TFT:"TFLT",TIM:"TIME",TKE:"TKEY",TLA:"TLAN",TLE:"TLEN",TMT:"TMED",TOA:"TOPE",TOF:"TOFN",TOL:"TOLY",TOR:"TORY",TOT:"TOAL",TP1:"TPE1",TP2:"TPE2",TP3:"TPE3",TP4:"TPE4",TPA:"TPOS",TPB:"TPUB",TRC:"TSRC",TRD:"TRDA",TRK:"TRCK",TSI:"TSIZ",TSS:"TSSE",TT1:"TIT1",TT2:"TIT2",TT3:"TIT3",TXT:"TEXT",TXX:"TXXX",TYE:"TYER",UFI:"UFID",ULT:"USLT",WAF:"WOAF",WAR:"WOAR",WAS:"WOAS",WCM:"WCOM",WCP:"WCOP",WPB:"WPB",WXX:"WXXX"},f={0:"Blues",1:"Classic Rock",2:"Country",3:"Dance",4:"Disco",5:"Funk",6:"Grunge",7:"Hip-Hop",8:"Jazz",9:"Metal",10:"New Age",11:"Oldies",12:"Other",13:"Pop",14:"R&B",15:"Rap",16:"Reggae",17:"Rock",18:"Techno",19:"Industrial",20:"Alternative",21:"Ska",22:"Death Metal",23:"Pranks",24:"Soundtrack",25:"Euro-Techno",26:"Ambient",27:"Trip-Hop",28:"Vocal",29:"Jazz+Funk",30:"Fusion",31:"Trance",32:"Classical",33:"Instrumental",34:"Acid",35:"House",36:"Game",37:"Sound Clip",38:"Gospel",39:"Noise",40:"AlternRock",41:"Bass",42:"Soul",43:"Punk",44:"Space",45:"Meditative",46:"Instrumental Pop",47:"Instrumental Rock",48:"Ethnic",49:"Gothic",50:"Darkwave",51:"Techno-Industrial",52:"Electronic",53:"Pop-Folk",54:"Eurodance",55:"Dream",56:"Southern Rock",57:"Comedy",58:"Cult",59:"Gangsta",60:"Top 40",61:"Christian Rap",62:"Pop/Funk",63:"Jungle",64:"Native American",65:"Cabaret",66:"New Wave",67:"Psychadelic",68:"Rave",69:"Showtunes",70:"Trailer",71:"Lo-Fi",72:"Tribal",73:"Acid Punk",74:"Acid Jazz",75:"Polka",76:"Retro",77:"Musical",78:"Rock & Roll",79:"Hard Rock",80:"Folk",81:"Folk-Rock",82:"National Folk",83:"Swing",84:"Fast Fusion",85:"Bebob",86:"Latin",87:"Revival",88:"Celtic",89:"Bluegrass",90:"Avantgarde",91:"Gothic Rock",92:"Progressive Rock",93:"Psychedelic Rock",94:"Symphonic Rock",95:"Slow Rock",96:"Big Band",97:"Chorus",98:"Easy Listening",99:"Acoustic",100:"Humour",101:"Speech",102:"Chanson",103:"Opera",104:"Chamber Music",105:"Sonata",106:"Symphony",107:"Booty Bass",108:"Primus",109:"Porn Groove",110:"Satire",111:"Slow Jam",112:"Club",113:"Tango",114:"Samba",115:"Folklore",116:"Ballad",117:"Power Ballad",118:"Rhythmic Soul",119:"Freestyle",120:"Duet",121:"Punk Rock",122:"Drum Solo",123:"A capella",124:"Euro-House",125:"Dance Hall"},g={pictures:[]},h=Infinity,p={APIC:function(a,b,c){g.pictures.push(n(b))},PIC:function(a,b,c){g.pictures.push(o(b))},TLEN:function(a,b,c){g.Length=k(b)},TCON:function(a,b,c){b=r(b);if(/\([0-9]+\)/.test(b))var d=f[parseInt(b.replace(/[\(\)]/g,""))];else var d=b;g.genre=d}};i(3,function(a){if(a=="ID3")i(2,function(a,b){g.version="ID3v2."+b[0]+"."+b[1],g.revision=b[0],console.log("version",g.version),i(1,function(a,b){b=l(b[0]),i(4,function(a,b){h=m(b),i(0,function(){}),q()})})});else{b(g);return!1}});return g},parseFile:function(a,b){function h(a,b,c){e=a,f=b,g=c,a==0&&b("",[])}var c=new FileReader,d=0,e=0,f=function(){},g=Infinity,i="";(function(){c.result&&(i=c.result),c.result.length>g&&c.abort();if(i.length>d+e&&e){var a=i.substr(d,e),b=a.split("").map(function(a){return a.charCodeAt(0)&255});d+=e,e=0;if(f(a,b)===!1){c.abort();return}}setTimeout(arguments.callee,0)})(),c.readAsBinaryString(a);return[c,ID3v2.parseStream(h,b)]}}